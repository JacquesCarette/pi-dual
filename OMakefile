########################################################################
# Phony targets are scoped, so you probably want to declare them first.
#

.PHONY : all clean dual-dropbox rational-dropbox

# POPL-dual
dual.subc.tex : dual.tex
        ruby subcode/subc.rb dual.tex

dual.subc.pdf : dual.subc.tex cites.bib
	pdflatex -halt-on-error dual.subc.tex
        bibtex dual.subc

dual-dropbox : dual.subc.pdf
	cp dual.subc.pdf ~/Dropbox/Public/papers


# POPL-dual
rational.subc.tex : rational.tex
        ruby subcode/subc.rb rational.tex

rational.subc.pdf : rational.subc.tex cites.bib
	pdflatex -halt-on-error rational.subc.tex
        bibtex rational.subc

rational-dropbox : rational.subc.pdf
	cp rational.subc.pdf ~/Dropbox/Public/papers


# Build all 
all : dual-dropbox rational-dropbox

# Clean
clean: 
	rm *.subc.*
	rm .subcode_cache*

clean-subcode:
	rm .subcode_cache*

.DEFAULT : all
