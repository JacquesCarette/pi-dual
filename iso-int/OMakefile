########################################################################
# Phony targets are scoped, so you probably want to declare them first.
#

.PHONY : all clean iso-int-dropbox rc-iso-int-dropbox

# iso-int
iso-int.subc.tex : iso-int.tex
        ruby subcode/subc.rb iso-int.tex

iso-int.subc.pdf : iso-int.subc.tex cites.bib
	pdflatex -halt-on-error iso-int.subc.tex
        bibtex iso-int.subc

iso-int-dropbox : iso-int.subc.pdf
	cp iso-int.subc.pdf ~/Dropbox/Public/papers


# rc-iso-int
rc-iso-int.subc.tex : rc-iso-int.tex
        ruby subcode/subc.rb rc-iso-int.tex

rc-iso-int.subc.pdf : rc-iso-int.subc.tex cites.bib
	pdflatex -halt-on-error rc-iso-int.subc.tex
        bibtex rc-iso-int.subc

rc-iso-int-dropbox : rc-iso-int.subc.pdf
	cp rc-iso-int.subc.pdf ~/Dropbox/Public/papers


# Build all 
all : rc-iso-int-dropbox iso-int-dropbox

# Clean
clean: 
	rm *.subc.*
	rm .subcode_cache*

clean-subcode:
	rm .subcode_cache*

.DEFAULT : all
