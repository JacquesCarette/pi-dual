########################################################################
# Phony targets are scoped, so you probably want to declare them first.
#

.PHONY : all clean iso-int-dropbox rc-iso-int-dropbox rc-iso-int-slides-dropbox bloomington-logic-talk-dropbox

# iso-int
iso-int.subc.tex : iso-int.tex
        ruby subcode/subc.rb iso-int.tex

iso-int.subc.pdf : iso-int.subc.tex cites.bib
	pdflatex -halt-on-error iso-int.subc.tex
        bibtex iso-int.subc

iso-int-dropbox : iso-int.subc.pdf
	cp iso-int.subc.pdf ~/Dropbox/Public/papers


# rc-iso-int
rc-iso-int.subc.tex : rc-iso-int.tex
        ruby subcode/subc.rb rc-iso-int.tex

rc-iso-int.subc.pdf : rc-iso-int.subc.tex cites.bib
	pdflatex -halt-on-error rc-iso-int.subc.tex
        bibtex rc-iso-int.subc

rc-iso-int-dropbox : rc-iso-int.subc.pdf
	cp rc-iso-int.subc.pdf ~/Dropbox/Public/papers

# rc-iso-int-slides
rc-iso-int-slides.subc.tex : rc-iso-int-slides.tex
        ruby subcode/subc.rb rc-iso-int-slides.tex

rc-iso-int-slides.subc.pdf : rc-iso-int-slides.subc.tex cites.bib
	pdflatex -halt-on-error rc-iso-int-slides.subc.tex
        #bibtex rc-iso-int-slides.subc

rc-iso-int-slides-dropbox : rc-iso-int-slides.subc.pdf
	cp rc-iso-int-slides.subc.pdf ~/Dropbox/Public/papers


# bloomington-logic-talk
bloomington-logic-talk.subc.tex : bloomington-logic-talk.tex
        ruby subcode/subc.rb bloomington-logic-talk.tex

bloomington-logic-talk.subc.pdf : bloomington-logic-talk.subc.tex cites.bib
	pdflatex -halt-on-error bloomington-logic-talk.subc.tex
        #bibtex bloomington-logic-talk.subc

bloomington-logic-talk-dropbox : bloomington-logic-talk.subc.pdf
	cp bloomington-logic-talk.subc.pdf ~/Dropbox/Public/papers


# Build all 
all : rc-iso-int-dropbox rc-iso-int-slides-dropbox iso-int-dropbox bloomington-logic-talk-dropbox

# Clean
clean: 
	rm *.subc.*
	rm .subcode_cache*

clean-subcode:
	rm .subcode_cache*

.DEFAULT : all
